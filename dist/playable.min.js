var playable=function(t){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var y=function(){function t(t){this.type=null,this.type=t}return t.ADDED="added",t.REMOVED="removed",t.ADDED_TO_STAGE="addToStage",t.REMOVED_FROM_STAGE="removeFromStage",t.ENTER_FRAME="enterFrame",t.TICK="tick",t.TICKER_PAUSE="tickerPause",t.TICKER_RESUME="tickerResume",t.VIEWPORT_RESIZE="viewportResize",t.PROGRESS="progress",t.COMPLETE="complete",t.LOAD="load",t.ERROR="error",t.SOUND_COMPLETE="soundComplete",t}(),e=function(){function t(){this.$events={}}return t.prototype.on=function(t,e){var i=this.$events[t]||[];return i.push(e),this.$events[t]=i,this},t.prototype.off=function(t,e){var i=this.$events[t]||[];if(e){var n=i.indexOf(e);0<=n&&i.splice(n,1)}else i.length=0;return this},t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.$events[t];if(n&&n.length){for(var r=0,o=n;r<o.length;r++){o[r].apply(this,e)}return!0}return!1},t.prototype.hasEventListener=function(t){var e=this.$events[t];return e&&0<e.length},t.prototype.removeAllListeners=function(){return this.$events={},this},t}(),i=function(i){function t(t){var e=i.call(this)||this;return e.$fps=0,e.$stage=null,e.$paused=!1,e.$shouldResume=!1,e.$timerIndex=0,e.$lastTimestamp=0,e.$tickHandle=null,e.$stage=t,e.$timers=[],e.$boundTick=e.$tick.bind(e),e.$enterFrameCallbackList=[t],e.$start(),e}return o(t,i),Object.defineProperty(t.prototype,"fps",{get:function(){return this.$fps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.$paused},enumerable:!0,configurable:!0}),t.prototype.$start=function(){for(var i=this,t=["","o","ms","moz","webkit"],e=0,n=t;e<n.length;e++){var r=(c=n[e])?c+"RequestAnimationFrame":"requestAnimationFrame",o=c?c+"CancelAnimationFrame":"cancelAnimationFrame",s=c?c+"CancelRequestAnimationFrame":"cancelRequestAnimationFrame";window.requestAnimationFrame=window.requestAnimationFrame||window[r],window.cancelAnimationFrame=window.cancelAnimationFrame||window[o],window.cancelAnimationFrame=window.cancelAnimationFrame||window[s]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return window.setTimeout(t,1e3/60)},window.cancelAnimationFrame=function(t){window.clearTimeout(t)});for(var a=function(t){var e=t?t+"Hidden":"hidden";if(void 0===document[e])return"break";document.addEventListener(t+"visibilitychange",function(){var t=i.$paused;document[e]&&!t?(i.pause(),i.$shouldResume=!0):i.$shouldResume&&(i.resume(),i.$shouldResume=!1)})},h=0,u=t;h<u.length;h++){var c;if("break"===a(c=u[h]))break}return this.$tick(),this},t.prototype.pause=function(){return this.$paused||(this.$paused=!0,this.$lastTimestamp=0,this.emit(y.TICKER_PAUSE),cancelAnimationFrame(this.$tickHandle)),this},t.prototype.resume=function(){return this.$paused&&(this.$paused=!1,this.$tick(),this.emit(y.TICKER_RESUME)),this},t.prototype.setTimeout=function(t,e){void 0===e&&(e=0);var i=++this.$timerIndex;return this.$timers[i]={handler:t,timeout:e,resetTime:e},i},t.prototype.clearTimeout=function(t){delete this.$timers[t]},t.prototype.setInterval=function(t,e){var i=++this.$timerIndex;return this.$timers[i]={handler:t,timeout:e,resetTime:e,interval:!0},i},t.prototype.clearInterval=function(t){delete this.$timers[t]},t.prototype.registerEnterFrameCallback=function(t){var e=this.$enterFrameCallbackList;return e.indexOf(t)<0&&e.push(t),this},t.prototype.unregisterEnterFrameCallback=function(t){var e=this.$enterFrameCallbackList,i=e.indexOf(t);return 0<=i&&e.splice(i,1),this},t.prototype.$tick=function(){for(var t=Date.now(),e=this.$lastTimestamp?t-this.$lastTimestamp:1e3/60,i=0,n=this.$enterFrameCallbackList;i<n.length;i++){n[i].emit(y.ENTER_FRAME,e)}this.$fps=Math.round(1e3/e),this.emit(y.TICK,e),this.$checkTimers(e),this.$lastTimestamp=t,this.$tickHandle=requestAnimationFrame(this.$boundTick)},t.prototype.$checkTimers=function(t){var e=this.$timers;for(var i in e){var n=e[i];(n.resetTime=n.resetTime-t)<=0&&(n.handler(),n.interval?n.resetTime+=n.timeout:this.clearTimeout(+i))}},t}(e),$=function(){function n(t,e){this.set(t,e)}return Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.set=function(t,e){return this.x=t||0,this.y=e||0,this},n.prototype.add=function(t,e){return t instanceof n?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e),this},n.prototype.subtract=function(t,e){return t instanceof n?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e),this},n.prototype.divide=function(t,e){return t instanceof n?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),this},n.prototype.dotProduct=function(t,e){return t instanceof n?this.x*t.x+this.y*t.y:this.x*t+this.y*e},n.prototype.normalize=function(){var t=this.length;return this.x=this.x/t,this.y=this.y/t,this},n.prototype.negate=function(){return this.x*=-1,this.y*=-1,this},n.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},n.prototype.rotate=function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)-i*Math.sin(t),this.y=e*Math.sin(t)+i*Math.cos(t),this},n.prototype.angle=function(){return Math.atan2(this.y,this.x)},n.prototype.distance=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.transform=function(t){var e=this.x,i=this.y;return this.x=t.a*e+t.c*i+t.tx,this.y=t.b*e+t.d*i+t.ty,this},n.prototype.release=function(){return n.recycle(this),this},n.create=function(t,e){var i=this.$pool;return 0<i.length?i.pop().set(t,e):new n(t,e)},n.recycle=function(t){this.$pool.push(t)},n.$pool=[],n}(),r=function(){function p(t,e,i,n,r,o){0<arguments.length?this.set(t,e,i,n,r,o):this.identity()}return p.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},p.prototype.identity=function(){return this.set(1,0,0,1,0,0)},p.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=this.ty,s=t*n-i*e;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*o-n*r)/s,this.ty=(e*r-t*o)/s,this},p.prototype.prepend=function(t,e,i,n,r,o){if(t instanceof p)return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty);var s=this.a,a=this.b,h=this.c,u=this.d,c=this.tx,l=this.ty;return this.a=t*s+e*h,this.b=t*a+e*u,this.c=i*s+n*h,this.d=i*a+n*u,this.tx=r*s+o*h+c,this.ty=r*a+o*u+l,this},p.prototype.append=function(t,e,i,n,r,o){if(t instanceof p)return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty);var s=this.a,a=this.b,h=this.c,u=this.d,c=this.tx,l=this.ty;return this.a=t*s+i*a,this.b=e*s+n*a,this.c=t*h+i*u,this.d=e*h+n*u,this.tx=t*c+i*l+r,this.ty=e*c+n*l+o,this},p.prototype.multiply=function(t){var e=this.a*t.x+this.c*t.y+this.tx,i=this.b*t.x+this.d*t.y+this.ty;return $.create(e,i)},p.prototype.scale=function(t,e){return this.append(t,0,0,void 0===e?t:e,0,0)},p.prototype.rotate=function(t){var e=Math.sin(t),i=Math.cos(t);return this.append(i,e,-e,i,0,0)},p.prototype.skew=function(t,e){return this.append(1,Math.tan(e),Math.tan(t),1,0,0)},p.prototype.translate=function(t,e){return t instanceof $?this.append(1,0,0,1,t.x,t.y):this.append(1,0,0,1,t,e)},p.prototype.equals=function(t){return t instanceof p&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.tx===t.tx&&this.ty===t.ty},p.prototype.release=function(){p.recycle(this)},p.create=function(t,e,i,n,r,o){var s,a=this.$pool;return s=0<a.length?a.pop():new p,arguments.length?s.set(t,e,i,n,r,o):s.identity(),s},p.recycle=function(t){this.$pool.push(t)},p.$pool=[],p}(),d=function(){function o(t,e,i,n){this.set(t,e,i,n)}return o.prototype.set=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},Object.defineProperty(o.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topLeft",{get:function(){return $.create(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottomRight",{get:function(){return $.create(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),o.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e<=this.y&&e<=this.y+this.height},o.prototype.release=function(){o.recycle(this)},o.create=function(t,e,i,n){var r=this.$pool;return 0<r.length?r.pop().set(t,e,i,n):new o(t,e,i,n)},o.recycle=function(t){this.$pool.push(t)},o.$pool=[],o}(),f=function(i){function n(t){var e=i.call(this,t)||this;return e.$init(t),e}return o(n,i),n.prototype.$init=function(t){return this.type=t,this.targetX=0,this.targetY=0,this.stageX=0,this.stageY=0,this.identifier=0,this.target=null,this.currentTarget=null,this.cancelBubble=!1,this},n.prototype.stopPropagation=function(){this.cancelBubble=!0},n.prototype.release=function(){n.recycle(this)},n.create=function(t){var e=this.$pool;return 0<e.length?e.pop().$init(t):new n(t)},n.recycle=function(t){this.$pool.push(t)},n.TOUCH_START="touchStart",n.TOUCH_MOVE="touchMove",n.TOUCH_END="touchEnd",n.TOUCH_CANCEL="touchCancel",n.TOUCH_TAP="touchTap",n.$pool=[],n}(y),H=function(i){function g(){var t=i.call(this)||this;return t.name="",t.tag="",t.touchable=!0,t.$x=0,t.$y=0,t.$width=0,t.$height=0,t.$anchorX=0,t.$anchorY=0,t.$skewX=0,t.$skewY=0,t.$scaleX=1,t.$scaleY=1,t.$rotation=0,t.$alpha=1,t.$visible=!0,t.$smoothing=!0,t.$backgroundColor=null,t.$backgroundImage=null,t.$backgroundPattern=null,t.$backgroundFillMode="scale",t.$dirty=!0,t.$stage=null,t.$parent=null,t.$children=[],t.$touches=[],t.$canvas=document.createElement("canvas"),t.$context=t.$canvas.getContext("2d"),t.on(y.ADDED,t.$onAdded),t.on(y.REMOVED,t.$onRemoved),t.on(y.ADDED_TO_STAGE,t.$onAddedToStage),t.on(y.REMOVED_FROM_STAGE,t.$onRemovedFromStage),t}return o(g,i),Object.defineProperty(g.prototype,"width",{get:function(){return this.$width?this.$width:this.$canvas.width/g.pixelRatio},set:function(t){this.$width!==t&&(this.$width=t,this.$resizeCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"height",{get:function(){return this.$height?this.$height:this.$canvas.height/g.pixelRatio},set:function(t){this.$height!==t&&(this.$height=t,this.$resizeCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"x",{get:function(){return this.$x},set:function(t){this.$x!==t&&(this.$x=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"y",{get:function(){return this.$y},set:function(t){this.$y!==t&&(this.$y=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"anchorX",{get:function(){return this.$anchorX},set:function(t){this.$anchorX!==t&&(this.$anchorX=t,this.$resizeCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"anchorY",{get:function(){return this.$anchorY},set:function(t){this.$anchorY!==t&&(this.$anchorY=t,this.$resizeCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"skewX",{get:function(){return this.$skewX},set:function(t){this.$skewX!==t&&(this.$skewX=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"skewY",{get:function(){return this.$skewY},set:function(t){this.$skewY!==t&&(this.$skewY=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"scaleX",{get:function(){return this.$scaleX},set:function(t){this.$scaleX!==t&&(this.$scaleX=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"scaleY",{get:function(){return this.$scaleY},set:function(t){this.$scaleY!==t&&(this.$scaleY=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"rotation",{get:function(){return this.$rotation},set:function(t){this.$rotation!==t&&(this.$rotation=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!==t&&(this.$alpha=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"backgroundColor",{get:function(){return this.$backgroundColor},set:function(t){this.$backgroundColor!==t&&(this.$backgroundColor=t,this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"backgroundImage",{get:function(){return this.$backgroundImage},set:function(t){this.$backgroundImage!==t&&(this.$backgroundImage=t,this.$backgroundPattern=this.$getPattern(this.$backgroundImage,this.$backgroundFillMode),this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"backgroundFillMode",{get:function(){return this.$backgroundFillMode},set:function(t){this.$backgroundFillMode!==t&&(this.$backgroundFillMode=t||"scale",this.$backgroundPattern=this.$getPattern(this.$backgroundImage,this.$backgroundFillMode),this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$visible!==t&&(this.$visible=t,this.$markParentDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){this.$smoothing=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"dirty",{get:function(){return this.$dirty},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"children",{get:function(){return this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"ticker",{get:function(){return this.$stage?this.$stage.ticker:null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"canvas",{get:function(){return this.$canvas},enumerable:!0,configurable:!0}),g.prototype.addChild=function(t){return this.addChildAt(t,this.$children.length)},g.prototype.addChildAt=function(t,e){return t.$parent&&t.$parent.removeChild(t),this.$stage&&t.emit(y.ADDED_TO_STAGE,this.$stage),t.emit(y.ADDED,this),this.$children.splice(e,0,t),this.$resizeCanvas(),this},g.prototype.replaceChild=function(t,e){var i=this.getChildIndex(t);return 0<=i&&(this.$children[i]=e,t.emit(y.REMOVED,this),this.$stage&&t.emit(y.REMOVED_FROM_STAGE,this.$stage)),this},g.prototype.getChildByName=function(t){for(var e=0,i=this.$children;e<i.length;e++){var n=i[e];if(n.name===t)return n}return null},g.prototype.getChildrenByTag=function(t){for(var e=[],i=0,n=this.$children;i<n.length;i++){var r=n[i];r.tag===t&&e.push(r)}return e},g.prototype.getChildAt=function(t){return this.$children[t]||null},g.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},g.prototype.hasChild=function(t){return 0<=this.getChildIndex(t)},g.prototype.swapChildren=function(t,e){var i=this.getChildIndex(t),n=this.getChildIndex(e);return 0<=i&&0<=n&&this.swapChildrenAt(i,n),this},g.prototype.swapChildrenAt=function(t,e){if(t!==e){var i=this.$children[t],n=this.$children[e];i&&n&&(this.$children[t]=n,this.$children[e]=i,this.$markDirty())}return this},g.prototype.setChildIndex=function(t,e){var i=this.$children,n=this.getChildIndex(t);if(0<=n&&n<e){for(var r=n+1;r<=e;++r)i[r-1]=i[r];i[e]=t,this.$markDirty()}else if(0<=n&&e<n){for(r=n-1;e<=r;--r)i[r+1]=i[r];i[e]=t,this.$markDirty()}return this},g.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return this.removeChildAt(e)},g.prototype.removeChildAt=function(t){if(0<=t){var e=this.$children.splice(t,1)[0];e.emit(y.REMOVED,this),this.$stage&&e.emit(y.REMOVED_FROM_STAGE,this.$stage),this.$resizeCanvas()}return this},g.prototype.removeChildrenByName=function(t){for(var e=this.$children,i=0,n=e.length;i<n;++i){if(e[i].name===t){this.removeChildAt(i);break}}return this},g.prototype.removeChildrenByTag=function(t){for(var e=this.$children,i=e.length-1;0<=i;--i){e[i].tag===t&&this.removeChildAt(i)}return this},g.prototype.removeAllChildren=function(){for(var t=0,e=this.$children;t<e.length;t++){var i=e[t];i.emit(y.REMOVED,this),this.$stage&&i.emit(y.REMOVED_FROM_STAGE)}return this.$children.length=0,this.$resizeCanvas(),this},g.prototype.removeSelf=function(){return this.$parent&&this.$parent.removeChild(this),this},g.prototype.$resizeCanvas=function(){var t=this.$width,e=this.$height,i=this.$canvas,n=this.$parent,r=this.$anchorX,o=this.$anchorY,s=this.$context,a=this.$smoothing,h=g.pixelRatio;if(t&&e)i.width=t*h,i.height=e*h;else{var u=this.$getContentBounds();i.width=(t||u.right+r)*h,i.height=(e||u.bottom+o)*h,u.release()}s.imageSmoothingEnabled!==a&&(s.imageSmoothingEnabled=a),n&&n.$resizeCanvas(),this.$dirty=!0},g.prototype.$getTransform=function(){var t=r.create();return t.translate(-this.$anchorX,-this.$anchorY),t.rotate(this.rotation*Math.PI/180).scale(this.scaleX,this.scaleY).skew(this.skewX,this.skewY),t.translate(this.x,this.y),t},g.prototype.$getChildTransform=function(t){return t.$getTransform()},g.prototype.$getChildBounds=function(t){var e=t.width,i=t.height,n=d.create(),r=this.$getChildTransform(t),o=$.create(0,0).transform(r),s=$.create(e,0).transform(r),a=$.create(0,i).transform(r),h=$.create(e,i).transform(r),u=Math.min(o.x,s.x,a.x,h.x),c=Math.max(o.x,s.x,a.x,h.x),l=Math.min(o.y,s.y,a.y,h.y),p=Math.max(o.y,s.y,a.y,h.y);return n.top=l,n.bottom=p,n.left=u,n.right=c,r.release(),o.release(),s.release(),a.release(),h.release(),n},g.prototype.$getContentBounds=function(){for(var t=this.$children,e=d.create(),i=0,n=t;i<n.length;i++){var r=n[i],o=this.$getChildBounds(r);e.top=Math.min(e.top?e.top:1/0,o.top),e.bottom=Math.max(e.bottom?e.bottom:-1/0,o.bottom),e.left=Math.min(e.left?e.left:1/0,o.left),e.right=Math.max(e.right?e.right:-1/0,o.right),o.release()}return e},g.prototype.$emitTouchEvent=function(t,e){var i=t.type,n=t.localX,r=t.localY,o=this.$touches,s=t.identifier;if(i===f.TOUCH_START)o[s]=!0;else{if(!o[s])return!1;i!==f.TOUCH_TAP&&i!==f.TOUCH_CANCEL||(o[s]=!1)}for(var a=this.$children,h=a.length-1;0<=h;--h){var u=a[h];if(u.$visible&&u.touchable){var c=this.$getChildTransform(u),l=$.create(n,r).transform(c.invert()).subtract(u.$anchorX,u.$anchorY),p=u.$localHitTest(l);if(l.release(),c.release(),(p||i!==f.TOUCH_START)&&(t.target=u,t.localX=t.targetX=l.x,t.localY=t.targetY=l.y,u.$emitTouchEvent(t,p)))break}}return t.cancelBubble||i===f.TOUCH_TAP&&!e||(t.localX=n,t.localY=r,(t.currentTarget=this).emit(t.type,t)),!0},g.prototype.$getPattern=function(t,e){return t&&e&&"scale"!==e&&"no-repeat"!==e?this.$context.createPattern(t.element,e):null},g.prototype.$localHitTest=function(t){return t.x>=-this.anchorX&&t.x<=this.width-this.anchorX&&t.y>=-this.anchorY&&t.y<=this.height-this.anchorY},g.prototype.$isChildVisible=function(t){if(!(t.visible&&t.alpha&&t.width&&t.height))return!1;var e=-this.$anchorX,i=this.width+e,n=-this.$anchorY,r=this.height+n,o=this.$getChildBounds(t);return o.left>i||o.right<e||o.top>r||o.bottom<n?(o.release(),!1):(o.release(),!0)},g.prototype.$drawBackground=function(t,e,i,n,r){var o=r||this.$context,s=o.canvas,a=s.width,h=s.height,u=g.pixelRatio/(e?e.pixelRatio:1);t&&(o.fillStyle=t,o.fillRect(0,0,a,h)),e&&("scale"===n?o.drawImage(e.element,0,0,a,h):"no-repeat"===n?o.drawImage(e.element,0,0,e.width*u,e.height*u):i&&(1!==u&&o.scale(u,u),o.fillStyle=i,o.fillRect(0,0,a,h)))},g.prototype.$drawChild=function(t){var e=this.$context,i=t.$canvas,n=t.width,r=t.height,o=g.pixelRatio,s=this.$getChildTransform(t).scale(o),a=t.$render(),h=e.globalAlpha;if(h!==t.alpha&&(e.globalAlpha=t.alpha),0===s.b&&0===s.c){var u=s.tx+.5|0,c=s.ty+.5|0;n=n*s.a+.5|0,r=r*s.d+.5|0,e.drawImage(i,u,c,n,r)}else e.save(),e.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),e.drawImage(i,0,0,n,r),e.restore();return void 0!==h&&(e.globalAlpha=h),s.release(),a+1},g.prototype.$render=function(){if(!this.$dirty)return 0;var t=0,e=this.$context,i=this.$canvas,n=this.$children,r=i.width,o=i.height,s=this.$anchorX+.5|0,a=this.$anchorY+.5|0,h=this.$backgroundColor,u=this.$backgroundImage,c=this.$backgroundPattern,l=this.$backgroundFillMode,p=g.pixelRatio;e.globalAlpha=1,e.resetTransform(),e.clearRect(0,0,r,o),this.$drawBackground(h,u,c,l),e.translate(s*p,a*p);for(var $=0,d=n;$<d.length;$++){var f=d[$];this.$isChildVisible(f)&&(t+=this.$drawChild(f))}return this.$dirty=!1,t},g.prototype.on=function(t,e){return i.prototype.on.call(this,t,e),t===y.ENTER_FRAME&&this.$stage?this.$stage.ticker.registerEnterFrameCallback(this):t===y.ADDED&&this.$parent?e():t===y.ADDED_TO_STAGE&&this.$stage&&e(),this},g.prototype.off=function(t,e){return i.prototype.off.call(this,t,e),this.$stage&&t===y.ENTER_FRAME&&!this.hasEventListener(y.ENTER_FRAME)&&this.$stage.ticker.unregisterEnterFrameCallback(this),this},g.prototype.$onAdded=function(t){this.$parent=t},g.prototype.$onRemoved=function(){this.$parent=null},g.prototype.$onAddedToStage=function(t){var e=this.$children;this.hasEventListener(y.ENTER_FRAME)&&t.ticker.registerEnterFrameCallback(this),this.$stage=t;for(var i=0,n=e;i<n.length;i++){n[i].emit(y.ADDED_TO_STAGE,t)}},g.prototype.$onRemovedFromStage=function(t){var e=this.$children;this.hasEventListener(y.ENTER_FRAME)&&t.ticker.unregisterEnterFrameCallback(this),this.$stage=null;for(var i=0,n=e;i<n.length;i++){n[i].emit(y.ADDED_TO_STAGE)}},g.prototype.$markDirty=function(){this.$dirty=!0,this.$markParentDirty()},g.prototype.$markParentDirty=function(){this.$parent&&this.$parent.$markDirty()},g.pixelRatio=window.devicePixelRatio||1,g}(e),g=function(){function t(){}return t.linear=function(t,e,i,n){return i*t/n+e},t.easeInQuad=function(t,e,i,n){return i*(t/=n)*t+e},t.easeOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,i,n){return i*(t/=n)*t*t+e},t.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.easeOutQuart=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.easeOutQuint=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},t.easeOutSine=function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},t.easeInOutSine=function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},t.easeInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},t.easeOutExpo=function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},t.easeInOutExpo=function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},t.easeInCirc=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.easeOutCirc=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.easeInOutCirc=function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),r=s<Math.abs(i)?(s=i,o/4):o/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)+e)},t.easeOutElastic=function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),r=s<Math.abs(i)?(s=i,o/4):o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/o)+i+e)},t.easeInOutElastic=function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:2==(t/=n/2)?e+i:(o||(o=n*(.3*1.5)),r=s<Math.abs(i)?(s=i,o/4):o/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*.5+i+e)},t.easeInBack=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},t.easeOutBack=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},t.easeInOutBack=function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},t.easeInBounce=function(t,e,i,n){return i-this.easeOutBounce(n-t,0,i,n)+e},t.easeOutBounce=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(t,e,i,n){return t<n/2?.5*this.easeInBounce(2*t,0,i,n)+e:.5*this.easeOutBounce(2*t-n,0,i,n)+.5*i+e},t}(),m=function(n){function i(t,e){var i=n.call(this)||this;return i.loop=!1,i.$target=null,i.$paused=!0,i.$stepIndex=0,i.$stepPosition=0,i.$steps=[],i.$stepProps=[],i.$shouldSaveProps=!0,i.$target=t,i.loop=!!e&&e.loop,i.$boundOnEnterFrame=i.$onEnterFrame.bind(i),i}return o(i,n),Object.defineProperty(i.prototype,"paused",{get:function(){return this.$paused},enumerable:!0,configurable:!0}),i.prototype.set=function(t){return this.$steps.push({type:"set",props:t}),this},i.prototype.to=function(t,e,i){return this.$steps.push({type:"to",duration:e,props:t,ease:i}),this},i.prototype.wait=function(t){return this.$steps.push({type:"wait",duration:t}),this},i.prototype.call=function(t){return this.$steps.push({type:"call",callback:t}),this},i.prototype.play=function(){return this.$paused&&(this.$paused=!1,this.$target.on(y.ENTER_FRAME,this.$boundOnEnterFrame),i.$tweens.push(this)),this},i.prototype.pause=function(){if(!this.$paused){this.$paused=!0,this.$target.off(y.ENTER_FRAME,this.$boundOnEnterFrame);var t=i.$tweens.indexOf(this);0<=t&&i.$tweens.splice(t,1)}return this},i.prototype.$onEnterFrame=function(t){var e=this.loop,i=this.$steps,n=this.$steps.length,r=this.$stepIndex,o=this.$stepPosition+t,s=i[r],a=s.type,h=s.duration||0,u=s.props,c=s.ease||g.linear,l=s.callback;"set"===a?this.$setProps(u):"to"===a?this.$easeProps(r,u,o,h,c):"call"===a&&l.call(this.$target),o<h?this.$stepPosition=o:r+1<n?(this.$stepPosition=0,this.$stepIndex=r+1,this.$shouldSaveProps=!0,this.$setProps(u),this.$onEnterFrame(o-h)):e?(this.$stepIndex=0,this.$stepPosition=0,this.$shouldSaveProps=!0,this.$setProps(u),this.$onEnterFrame(o-h)):(this.$stepIndex=0,this.$stepPosition=0,this.$shouldSaveProps=!0,this.$setProps(u),this.pause())},i.prototype.$saveOriginalProps=function(t,e){var i=this.$target,n=this.$stepProps,r=n[t]=n[t]||{};for(var o in e)r[o]=i[o];this.$shouldSaveProps=!1},i.prototype.$easeProps=function(t,e,i,n,r){this.$shouldSaveProps&&this.$saveOriginalProps(t,e);var o=this.$target,s=this.$stepProps[t]||{};for(var a in n<i&&(i=n),e){var h=s[a],u=e[a]-h;o[a]=r(i,h,u,n)}},i.prototype.$setProps=function(t){var e=this.$target;for(var i in t)e[i]=t[i]},i.get=function(t,e){return new i(t,e)},i.pauseTweens=function(t){for(var e=0,i=this.$tweens;e<i.length;e++){var n=i[e];n.$target===t&&n.pause()}},i.resumeTweens=function(t){for(var e=0,i=this.$tweens;e<i.length;e++){var n=i[e];n.$target===t&&n.play()}},i.removeTweens=function(t){for(var e=this.$tweens,i=e.length-1;0<=i;--i){var n=e[i];n.$target===t&&n.pause()}},i.removeAllTweens=function(){for(var t=this.$tweens,e=t.length-1;0<=e;--e){t[e].pause()}},i.$tweens=[],i}(e),s=function(i){function d(){var t=i.call(this)||this;return t.$scrollTop=0,t.$scrollLeft=0,t.$scrollWidth=0,t.$scrollHeight=0,t.$touchingX=null,t.$touchingY=null,t.$touchingId=null,t.$touchingTime=null,t.$velocitiesX=[],t.$velocitiesY=[],t.$inertiaTween=null,t.width=200,t.height=200,t.on(f.TOUCH_START,t.$onTouchStart),t.on(f.TOUCH_MOVE,t.$onTouchMove),t.on(f.TOUCH_END,t.$onTouchEnd),t.on(f.TOUCH_CANCEL,t.$onTouchCancel),t}return o(d,i),Object.defineProperty(d.prototype,"scrollTop",{get:function(){return this.$scrollTop},set:function(t){var e=this.$getContentBounds(),i=this.$scrollHeight-this.$height;this.$scrollTop=Math.max(0,Math.min(t,i)),this.$markDirty(),e.release()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scrollLeft",{get:function(){return this.$scrollLeft},set:function(t){var e=this.$getContentBounds(),i=this.$scrollWidth-this.width;this.$scrollLeft=Math.max(0,Math.min(t,i)),this.$markDirty(),e.release()},enumerable:!0,configurable:!0}),d.prototype.$getChildTransform=function(t){var e=i.prototype.$getChildTransform.call(this,t);return e.translate(-this.$scrollLeft,-this.$scrollTop),e},d.prototype.$resizeCanvas=function(){i.prototype.$resizeCanvas.call(this);var t=this.$getContentBounds();this.$scrollWidth=this.$scrollLeft+t.right+this.$anchorX,this.$scrollHeight=this.$scrollTop+t.bottom+this.$anchorY},d.prototype.$onTouchStart=function(t){this.$touchingX=t.localX,this.$touchingY=t.localY,this.$velocitiesX.length=0,this.$velocitiesY.length=0,this.$touchingTime=Date.now(),this.$touchingId=t.identifier,this.$inertiaTween&&(this.$inertiaTween.pause(),this.$inertiaTween=null)},d.prototype.$onTouchMove=function(t){if(t.identifier===this.$touchingId){var e=Date.now(),i=this.scrollTop,n=this.scrollLeft,r=e-this.$touchingTime,o=this.$velocitiesX,s=this.$velocitiesY,a=t.localX-this.$touchingX,h=t.localY-this.$touchingY,u=d.scrollingView||this;o.push(a/r),s.push(h/r),5<o.length&&(o.shift(),s.shift()),this.$touchingX=t.localX,this.$touchingY=t.localY,u===this&&(this.$touchingTime=e,this.scrollTop-=h,this.scrollLeft-=a,this.$scrollLeft===n&&this.$scrollTop===i||(d.scrollingView=this))}},d.prototype.$onTouchEnd=function(t){if(t.identifier===this.$touchingId&&d.scrollingView===this){d.scrollingView=null;for(var e=0,i=0,n=this.$scrollTop,r=this.$scrollLeft,o=this.$velocitiesX,s=this.$velocitiesY,a=o.length,h=0;h<a;++h)e+=o[h],i+=s[h];var u=e/a,c=i/a,l=Math.abs(u),p=Math.abs(c);if(.01<l||.01<p){var $=1e3*Math.max(l,p,1);this.$inertiaTween=m.get(this).to({scrollTop:n-c*(p+1)*200,scrollLeft:r-u*(l+1)*200},$,g.easeOutQuart).play()}this.$touchingId=null}},d.prototype.$onTouchCancel=function(t){t.identifier===this.$touchingId&&(this.$touchingId=null)},d.prototype.$onRemovedFromStage=function(t){i.prototype.$onRemovedFromStage.call(this,t),this.$inertiaTween&&this.$inertiaTween.pause()},d}(H),a=function(B){function t(t,e,i){var n=B.call(this)||this;return t&&(n.$width=e,n.$height=i,n.$boundOnImageLoad=n.$onImageLoad.bind(n),n.image=t),n}return o(t,B),Object.defineProperty(t.prototype,"image",{get:function(){return this.$image},set:function(t){(this.$image=t).width&&t.height?this.$resizeCanvas():this.$width&&this.$height||t.on("load",this.$boundOnImageLoad)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipRect",{get:function(){return this.$clipRect},set:function(t){this.$clipRect=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$scale9Grid=t,this.$markDirty()},enumerable:!0,configurable:!0}),t.prototype.$onImageLoad=function(){this.$resizeCanvas(),this.$image.off("load",this.$boundOnImageLoad)},t.prototype.$getContentBounds=function(){var t=this.$image,e=this.$clipRect,i=B.prototype.$getContentBounds.call(this);return i.x=Math.min(i.left,-this.$anchorX),i.y=Math.min(i.top,-this.$anchorY),i.height=e?(i.width=Math.max(i.width,e.width),Math.max(i.height,e.height)):(i.width=Math.max(i.width,t.width),Math.max(i.height,t.height)),i},t.prototype.$drawImage=function(t,e,i,n,r,o,s,a){var h=this.$image,u=this.$context,c=h.pixelRatio;0<i&&0<n&&0<s&&0<a&&u.drawImage(h.element,t*c,e*c,i*c,n*c,r,o,s,a)},t.prototype.$render=function(){if(!this.$dirty)return 0;var t=this.$image,e=this.$canvas,i=this.$anchorX,n=this.$anchorY,r=this.$clipRect,o=this.$scale9Grid,s=B.prototype.$render.call(this),a=H.pixelRatio,h=-i*a,u=-n*a,c=e.width,l=e.height,p=r?r.x:0,$=r?r.y:0,d=r?r.width:t.width,f=r?r.height:t.height;if(o){var g=p,y=$,m=o.x,v=o.y,b=g+m,w=y+v,E=o.width,T=o.height,O=b+E,C=w+T,x=d-m-E,k=f-v-T,P=-i*a,R=-n*a,M=m*a,A=v*a,S=P+M,I=R+A,D=c-(m+x)*a,F=l-(v+k)*a,_=S+D,L=I+F,j=c-M-D,z=l-A-F;this.$drawImage(g,y,m,v,P,R,M,A),this.$drawImage(b,y,E,v,S,R,D,A),this.$drawImage(O,y,x,v,_,R,j,A),this.$drawImage(g,w,m,T,P,I,M,F),this.$drawImage(b,w,E,T,S,I,D,F),this.$drawImage(O,w,x,T,_,I,j,F),this.$drawImage(g,C,m,k,P,L,M,z),this.$drawImage(b,C,E,k,S,L,D,z),this.$drawImage(O,C,x,k,_,L,j,z)}else this.$drawImage(p,$,d,f,h,u,c,l);return s},t}(H),h=function(b){function h(t,e){void 0===e&&(e={});var i=b.call(this)||this;return i.$text="",i.$color="black",i.$fontSize=h.defaultFontSize,i.$fontStyle="normal",i.$fontWeight="normal",i.$textAlign="left",i.$verticalAlign="top",i.$lineHeight=1.2,i.$strokeSize=0,i.$strokeColor=null,i.$fontFamily="Helvetica",i.$multiline=!1,i.$breakWord=!1,i.$autoFitSize=!1,i.$minFontSize=0,i.$explicitSize=0,i.$lines=[],i.$text=t||i.$text,i.$color=e.color||i.$color,i.$fontSize=e.fontSize||i.$fontSize,i.$fontStyle=e.fontStyle||i.$fontStyle,i.$fontWeight=e.fontWeight||i.$fontWeight,i.$textAlign=e.textAlign||i.$textAlign,i.$verticalAlign=e.verticalAlign||i.$verticalAlign,i.$lineHeight=e.lineHeight||i.$lineHeight,i.$strokeSize=e.strokeSize||i.$strokeSize,i.$strokeColor=e.strokeColor||i.$strokeColor,i.$fontFamily=e.fontFamily||i.$fontFamily,i.$multiline=e.multiline||i.$multiline,i.$breakWord=e.breakWord||i.$breakWord,i.$resizeCanvas(),i}return o(h,b),Object.defineProperty(h.prototype,"text",{get:function(){return this.$text},set:function(t){this.$text=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fontSize",{get:function(){return this.$fontSize},set:function(t){this.$fontSize=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fontStyle",{get:function(){return this.$fontStyle},set:function(t){this.$fontStyle=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fontWeight",{get:function(){return this.$fontWeight},set:function(t){this.$fontWeight=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$textAlign=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"lineHeight",{get:function(){return this.$lineHeight},set:function(t){this.$lineHeight=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"strokeSize",{get:function(){return this.$strokeSize},set:function(t){this.$strokeSize=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(t){this.$strokeColor=t,this.$markDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fontFamily",{get:function(){return this.$fontFamily},set:function(t){this.$fontFamily=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"multiline",{get:function(){return this.$multiline},set:function(t){this.$multiline=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"breakWord",{get:function(){return this.$breakWord},set:function(t){this.$breakWord=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"autoFitSize",{get:function(){return this.$autoFitSize},set:function(t){this.$autoFitSize=t,this.$resizeCanvas()},enumerable:!0,configurable:!0}),h.prototype.$updateContext=function(){var t=this.$context,e=this.$fontStyle,i=this.$fontWeight,n=H.pixelRatio,r=(this.$explicitSize||this.$fontSize)*n+"px";t.font=e+" "+i+" "+r+" "+this.fontFamily,t.textAlign=this.textAlign,t.textBaseline="top",t.fillStyle=this.color,t.lineWidth=this.strokeSize*n,t.strokeStyle=this.strokeColor},h.prototype.$divideUnits=function(){var t,e=this.$text,i=this.$breakWord,n=h.wordRe,r=h.boundaryRe;if(i)t=e.split("");else{t=[];for(var o=0,s=e.split(r);o<s.length;o++){var a=s[o];n.test(a)?t.push(a):t=t.concat(a.split(""))}}return t},h.prototype.$divideLines=function(){var t=this.$text;if(this.$multiline)if(this.$width){var e="",i=this.$context,n=this.$lines=[],r=this.$divideUnits(),o=this.$width*H.pixelRatio;this.$updateContext();for(var s=0,a=r;s<a.length;s++){var h=a[s];if("\n"!==h)i.measureText(e+h).width<=o?e+=h:(e&&n.push(e),e=h);else n.push(e),e=""}n.push(e)}else this.$lines=t.split("\n");else this.$lines=[t]},h.prototype.$resizeCanvas=function(){var t=this.$width,e=this.$height;if(this.$divideLines(),this.$autoFitSize&&(t||e)){var i=this.$minFontSize||1;for(this.$explicitSize=this.$fontSize;this.$explicitSize>i;){var n=this.$getContentBounds();if(!(t&&n.width>t||e&&n.height>e))break;--this.$explicitSize,n.release()}}b.prototype.$resizeCanvas.call(this)},h.prototype.$getContentBounds=function(){var t=this.$context,e=b.prototype.$getContentBounds.call(this),i=this.$lines,n=this.$lineHeight,r=H.pixelRatio,o=this.$explicitSize||this.$fontSize;this.$updateContext();for(var s=0,a=i;s<a.length;s++){var h=a[s];e.width=Math.max(e.width,t.measureText(h).width/r)}return e.height=Math.max(e.height,o*n*i.length),e},h.prototype.$render=function(){if(!this.$dirty)return 0;var t=0,e=0,i=this.width,n=this.height,r=this.anchorX,o=this.anchorY,s=this.$context,a=this.$lines,h=this.$color,u=this.$textAlign,c=this.$verticalAlign,l=this.$lineHeight,p=this.$strokeSize,$=this.$strokeColor,d=H.pixelRatio,f=this.$explicitSize||this.$fontSize,g=b.prototype.$render.call(this);this.$updateContext(),t="center"===u?i*d/2-r*d:"right"===u?i*d-r*d:-r*d,e="middle"===c?(n-f*l*(a.length-1)-f)*d/2-o*d:"bottom"===c?(n-f*l*(a.length-1)-f)*d-o*d:-o*d;for(var y=0,m=a;y<m.length;y++){var v=m[y];h&&s.fillText(v,t,e),p&&$&&s.strokeText(v,t,e),e+=f*l*d}return g},h.defaultFontSize=16,h.wordRe=/\w+/,h.boundaryRe=/\b/,h}(H),u=function(n){function t(t,e){var i=n.call(this,t)||this;return i.$loop=!0,i.$paused=!0,i.$currentFrame=0,i.$frames=null,i.$interval=30,i.$frames=e,i.$boundNextFrame=i.nextFrame.bind(i),i.play(),i}return o(t,n),Object.defineProperty(t.prototype,"loop",{get:function(){return this.$loop},set:function(t){this.$loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.$paused},set:function(t){this.$paused=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$currentFrame},set:function(t){this.$currentFrame=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this.$frames.length},enumerable:!0,configurable:!0}),t.prototype.play=function(){return this.off(y.ADDED_TO_STAGE,this.play),this.gotoAndPlay(this.$currentFrame)},t.prototype.pause=function(){var t=this.ticker;return this.$paused=!0,t&&t.clearTimeout(this.$timer),this.off(y.ADDED_TO_STAGE,this.play),this},t.prototype.nextFrame=function(){return this.gotoAndPlay(this.$currentFrame+1)},t.prototype.gotoAndPlay=function(t){this.$paused=!1,this.$gotoFrame(t);var e=this.$loop,i=this.ticker,n=this.$frames,r=n.length,o=n[this.$currentFrame];return i?(i.clearTimeout(this.$timer),(t<r-1||e)&&(this.$timer=i.setTimeout(this.$boundNextFrame,o.interval||this.$interval))):this.on(y.ADDED_TO_STAGE,this.play),this},t.prototype.gotoAndStop=function(t){return this.$paused=!0,this.$gotoFrame(t),this},t.prototype.$gotoFrame=function(t){var e=this.$frames.length;(t<0||e<=t)&&(t=(t+e)%e),t<0&&(t=0);var i=this.$frames[t];this.$currentFrame=t,this.clipRect=i.clip,this.stage&&i.callback&&i.callback.call(this)},t}(a),c=function(i){function t(t){var e=i.call(this)||this;return e.$stage=t,e.$boundOnLoad=e.$onLoad.bind(e),e.$boundOnError=e.$onError.bind(e),e}return o(t,i),Object.defineProperty(t.prototype,"element",{get:function(){return this.$element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(t){this.$element.src=t},enumerable:!0,configurable:!0}),t.prototype.$onLoad=function(){this.emit("load"),this.$element.removeEventListener(y.LOAD,this.$boundOnLoad)},t.prototype.$onError=function(t){this.emit("error",t),this.$element.removeEventListener(y.ERROR,this.$boundOnError)},t}(e),v=function(n){function r(t){var e=n.call(this,t)||this;e.pixelRatio=r.defaultPixelRatio;var i=document.createElement("img");return i.crossOrigin="*",i.addEventListener("load",e.$boundOnLoad),i.addEventListener("error",e.$boundOnError),e.$element=i,e}return o(r,n),Object.defineProperty(r.prototype,"element",{get:function(){return this.$element},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.$element.width},set:function(t){this.$element.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.$element.height},set:function(t){this.$element.height=t},enumerable:!0,configurable:!0}),r.defaultPixelRatio=1,r}(c),b=function(n){function t(t){var e=n.call(this,t)||this;e.$loops=1,e.$startTime=0,e.$paused=!1;var i=document.createElement("audio");return i.crossOrigin="*",i.addEventListener("canplaythrough",e.$boundOnLoad),i.addEventListener("error",e.$boundOnError),i.addEventListener("ended",e.$onEnded.bind(e)),e.$element=i,e.$boundOnTouch=e.$onTouch.bind(e),t.ticker.on(y.TICKER_PAUSE,e.$onTickerPause.bind(e)),t.ticker.on(y.TICKER_RESUME,e.$onTickerResume.bind(e)),e}return o(t,n),Object.defineProperty(t.prototype,"element",{get:function(){return this.$element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(t){this.$paused=!0,this.$element.src=t,this.$element.load(),0===t.indexOf("data:")&&this.$stage.ticker.setTimeout(this.$boundOnLoad)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.$element.volume},set:function(t){this.$element.volume=t},enumerable:!0,configurable:!0}),t.prototype.$checkOnTouch=function(){document.addEventListener("click",this.$boundOnTouch),document.addEventListener("touchend",this.$boundOnTouch)},t.prototype.$checkStatus=function(){this.$element.play().catch(),this.$paused&&this.$element.pause()},t.prototype.$onTouch=function(){this.$checkStatus(),document.removeEventListener("click",this.$boundOnTouch),document.removeEventListener("touchend",this.$boundOnTouch)},t.prototype.$onEnded=function(){1===this.$loops?(this.stop(),this.emit(y.SOUND_COMPLETE)):0===this.$loops?this.play(this.$startTime,0):this.play(this.$startTime,this.$loops-1)},t.prototype.$onTickerPause=function(){this.$paused||this.$element.pause()},t.prototype.$onTickerResume=function(){this.$paused||this.$checkStatus()},t.prototype.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.$loops=e,this.$startTime=t,this.$element.currentTime=t,this.$paused=!1,this.$checkStatus(),this},t.prototype.stop=function(){return this.$paused=!0,this.$element.pause(),this},t.prototype.$onLoad=function(){n.prototype.$onLoad.call(this),this.$element.play().then(this.$checkStatus.bind(this)).catch(this.$checkOnTouch.bind(this))},t}(c),w=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(b),E=function(r){function f(t,e,i){var n=r.call(this)||this;return n.$errorCount=0,n.$loadedCount=0,n.$loadingCount=0,n.$stage=t,n.threads=i&&i.threads||2,n.timeout=i&&i.timeout||1e4,n.retryTimes=i&&i.retryTimes||3,n.$list=e.concat(),n.$total=e.length,n.$resources={},n.$checkPendingTasks(),n}return o(f,r),Object.defineProperty(f.prototype,"total",{get:function(){return this.$total},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"errorCount",{get:function(){return this.$errorCount},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"loadedCount",{get:function(){return this.$loadedCount},enumerable:!0,configurable:!0}),f.prototype.$checkPendingTasks=function(){this.$loadingCount<this.threads&&0<this.$list.length&&(++this.$loadingCount,this.$load(this.$list.shift(),1))},f.prototype.$load=function(i,n){var r,o,s=this,a=i.name,t=i.type,e=i.url,h=this.$total,u=this.$stage,c=u.ticker,l=this.$resources,p=this.retryTimes,$=function(){var t=s.$errorCount,e=++s.$loadedCount;--s.$loadingCount,l[a]=o,c.clearTimeout(r),o.off(y.LOAD,$),o.off(y.ERROR,d),s.emit(y.PROGRESS,(e+t)/h),e+t===h?s.emit(y.COMPLETE):s.$checkPendingTasks()},d=function(){if(n<p)s.$load(i,n+1);else{--s.$loadingCount;var t=s.$loadedCount,e=++s.$errorCount;l[a]=o,s.emit(y.PROGRESS,(t+e)/h),t+e===h?s.emit(y.COMPLETE):s.$checkPendingTasks()}c.clearTimeout(r),o.off(y.LOAD,$),o.off(y.ERROR,d)};if(t===f.TYPE_IMAGE)(o=new v(u)).on(y.LOAD,$),o.on(y.ERROR,d),o.url=e;else if(t===f.TYPE_SOUND)(o=new b(u)).on(y.LOAD,$),o.on(y.ERROR,d),o.url=e;else{if(t!==f.TYPE_SOUND_EFFECT)throw new Error("Unsupported resource type: "+t);(o=new w(u)).on(y.LOAD,$),o.on(y.ERROR,d),o.url=e}r=c.setTimeout(d,this.timeout)},f.prototype.has=function(t){return!!this.$resources[t]},f.prototype.get=function(t){var e=this.$resources[t];if(!e)throw new Error("Resource not exists");return e},f.TYPE_IMAGE="image",f.TYPE_SOUND="sound",f.TYPE_SOUND_EFFECT="soundEffect",f}(e),l=function(l){function p(t){var e=l.call(this)||this;return e.$viewportBackgroundFillMode="scale",e.$scaleMode=p.SHOW_ALL,e.$ticker=new i(e),e.$viewportCanvas=t||document.createElement("canvas"),e.$viewportContext=e.$viewportCanvas.getContext("2d"),e.$boundResizeViewportCanvas=e.$resizeViewportCanvas.bind(e),e.$initEvents(),e.width=320,e.height=568,e.viewportWidth=0,e.viewportHeight=0,t||(e.$viewportCanvas.style.top="0",e.$viewportCanvas.style.left="0",e.$viewportCanvas.style.position="fixed",document.body.appendChild(e.$viewportCanvas)),e}return o(p,l),p.prototype.$initEvents=function(){var t,e=this,i=this.$ticker;this.$addTouchEventListeners(),this.on(y.ENTER_FRAME,this.$render),i.setTimeout(function(){e.emit(y.ADDED_TO_STAGE,e)}),window.addEventListener("resize",function(){i.clearTimeout(t),t=i.setTimeout(e.$boundResizeViewportCanvas,100)})},Object.defineProperty(p.prototype,"x",{get:function(){return 0},set:function(t){this.$x=0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"y",{get:function(){return 0},set:function(t){this.$y=0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.scaleMode!==t&&(this.$scaleMode=t,this.$resizeCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportWidth",{get:function(){return this.$viewportWidth?this.$viewportWidth:this.$viewportCanvas.width/H.pixelRatio},set:function(t){this.$viewportWidth!==t&&(this.$viewportWidth=t,this.$resizeViewportCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportHeight",{get:function(){return this.$viewportHeight?this.$viewportHeight:this.$viewportCanvas.height/H.pixelRatio},set:function(t){this.$viewportHeight!==t&&(this.$viewportHeight=t,this.$resizeViewportCanvas())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportBackgroundColor",{get:function(){return this.$viewportBackgroundColor},set:function(t){this.$viewportBackgroundColor!==t&&(this.$viewportBackgroundColor=t,this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportBackgroundImage",{get:function(){return this.$viewportBackgroundImage},set:function(t){this.$viewportBackgroundImage!==t&&(this.$viewportBackgroundImage=t,this.$viewportBackgroundPattern=this.$getPattern(this.$viewportBackgroundImage,this.$viewportBackgroundFillMode),this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewportBackgroundFillMode",{get:function(){return this.$viewportBackgroundFillMode},set:function(t){this.$viewportBackgroundFillMode!==t&&(this.$viewportBackgroundFillMode=t||"scale",this.$viewportBackgroundPattern=this.$getPattern(this.$viewportBackgroundImage,this.$viewportBackgroundFillMode),this.$markDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"drawCalls",{get:function(){return this.$drawCalls},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"fps",{get:function(){return this.$ticker.fps},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ticker",{get:function(){return this.$ticker},enumerable:!0,configurable:!0}),p.prototype.createResourceManager=function(t,e){return new E(this,t,e)},p.prototype.$addTouchEventListeners=function(){var e=this,t=this.$viewportCanvas;if(void 0!==t.ontouchstart)t.addEventListener("touchstart",function(t){e.$dispatchTouches(f.TOUCH_START,t),t.preventDefault()}),t.addEventListener("touchmove",function(t){e.$dispatchTouches(f.TOUCH_MOVE,t),t.preventDefault()},{passive:!1}),t.addEventListener("touchend",function(t){e.$dispatchTouches(f.TOUCH_END,t),e.$dispatchTouches(f.TOUCH_TAP,t)}),t.addEventListener("touchcancel",function(t){e.$dispatchTouches(f.TOUCH_CANCEL,t)});else{var i=!1;t.addEventListener("mousedown",function(t){e.$dispatchTouchEvent(f.TOUCH_START,t),i=!0}),t.addEventListener("mousemove",function(t){i&&e.$dispatchTouchEvent(f.TOUCH_MOVE,t)}),t.addEventListener("mouseup",function(t){e.$dispatchTouchEvent(f.TOUCH_END,t),i=!1}),t.addEventListener("click",function(t){e.$dispatchTouchEvent(f.TOUCH_TAP,t)}),window.addEventListener("mouseout",function(t){e.$dispatchTouchEvent(f.TOUCH_CANCEL,t)})}},p.prototype.$dispatchTouches=function(t,e){for(var i=e.changedTouches,n=0,r=i.length;n<r;++n)this.$dispatchTouchEvent(t,i[n])},p.prototype.$dispatchTouchEvent=function(t,e){if(!this.$ticker.paused&&this.$visible&&this.touchable){var i=f.create(t),n=this.$canvas.width,r=this.$canvas.height,o=this.$renderBounds,s=H.pixelRatio,a=this.$viewportCanvas.getBoundingClientRect(),h=(e.pageX-a.left-o.x/s)*n/o.width-this.$anchorX,u=(e.pageY-a.top-o.y/s)*r/o.height-this.$anchorY,c=this.$getTransform(),l=$.create(h,u).transform(c.invert()).subtract(this.$anchorX,this.$anchorY),p=this.$localHitTest(l);(p||t!==f.TOUCH_START)&&(i.localX=l.x,i.localY=l.y,i.targetX=i.stageX=h,i.targetY=i.stageY=u,i.identifier=e instanceof Touch?e.identifier:0,this.$emitTouchEvent(i,p)),i.release(),c.release(),l.release()}},p.prototype.$calculateRenderBounds=function(){var t=0,e=0,i=this.$canvas,n=i.width,r=i.height,o=this.scaleMode,s=n/r,a=this.$viewportCanvas,h=a.width,u=a.height,c=h/u,l=this.$renderBounds||d.create();o===p.NO_SCALE||(o===p.NO_BORDER?(s<c?r=(n=h)/s:n=(r=u)*s,t=(h-n)/2,e=(u-r)/2):o===p.SHOW_ALL?c<s?r=(n=h)/s:n=(r=u)*s:o===p.EXACT_FIT?(n=h,r=u):o===p.FIXED_WIDTH?r=(n=h)/s:o===p.FIXED_HEIGHT?n=(r=u)*s:o===p.FIXED_WIDE?u<h?r=(n=h)/s:n=(r=u)*s:o===p.FIXED_NARROW&&(h<u?r=(n=h)/s:n=(r=u)*s)),n<h&&(t=(h-n)/2),r<u&&(e=(u-r)/2),l.x=t,l.y=e,l.width=n,l.height=r,this.$renderBounds=l},p.prototype.$resizeCanvas=function(){l.prototype.$resizeCanvas.call(this),this.$calculateRenderBounds()},p.prototype.$resizeViewportCanvas=function(){var t=this.$viewportWidth||window.innerWidth,e=this.$viewportHeight||window.innerHeight;this.$viewportCanvas.width=t*H.pixelRatio,this.$viewportCanvas.height=e*H.pixelRatio,this.$viewportCanvas.style.transformOrigin="0 0",this.$viewportCanvas.style.transform="scale("+1/H.pixelRatio+")",this.$calculateRenderBounds(),this.$markDirty(),this.emit(y.VIEWPORT_RESIZE)},p.prototype.$render=function(){if(!this.$dirty)return this.$drawCalls=0;var t=l.prototype.$render.call(this),e=this.$canvas,i=this.$viewportContext,n=this.$renderBounds,r=this.$viewportCanvas,o=r.width,s=r.height,a=this.$viewportBackgroundColor,h=this.$viewportBackgroundImage,u=this.$viewportBackgroundPattern,c=this.$viewportBackgroundFillMode;return i.clearRect(0,0,o,s),this.$drawBackground(a,h,u,c,i),i.drawImage(e,n.x+.5|0,n.y+.5|0,n.width+.5|0,n.height+.5|0),this.$drawCalls=++t,t},p.NO_SCALE="noScale",p.NO_BORDER="noBorder",p.SHOW_ALL="showAll",p.EXACT_FIT="exactFit",p.FIXED_WIDE="fixedWide",p.FIXED_NARROW="fixedNarrow",p.FIXED_WIDTH="fixedWidth",p.FIXED_HEIGHT="fixedHeight",p}(H);return t.Ticker=i,t.Layer=H,t.ScrollView=s,t.ImageView=a,t.TextView=h,t.MovieClip=u,t.Stage=l,t.Event=y,t.TouchEvent=f,t.EventEmitter=e,t.Matrix=r,t.Vector=$,t.Rectangle=d,t.Media=c,t.Image=v,t.Sound=b,t.SoundEffect=w,t.Ease=g,t.Tween=m,t.ResourceManager=E,t}({});
